<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ground Station</title>
        <link rel="stylesheet" href="/static/css/index.css" />
        <link rel="stylesheet" href="/static/css/leaflet.css" />
        <script type="module" src="/src/main.ts"></script>
        <style>
            body {
                font-family: "Inter", sans-serif;
            }
            .no-scrollbar::-webkit-scrollbar {
                display: none;
            }
            .no-scrollbar {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
        </style>
    </head>
    <body class="bg-[#050809] text-white">
        <nav
            id="topbar"
            class="sticky top-0 z-50 bg-[#050809]/90 backdrop-blur-md border-b border-gray-800 w-full flex justify-between items-center p-3 shadow-lg"
        >
            <div id="title" class="leading-tight py-1">
                <h1
                    class="text-gray-400 text-[0.65rem] uppercase tracking-widest font-bold"
                >
                    The Retrievers
                </h1>
                <h3 class="text-white text-xl font-bold">Ground Station</h3>
            </div>
            <div id="status" class="flex gap-2">
                <div
                    class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-1 flex flex-col items-center"
                >
                    <span class="text-[0.6rem] text-gray-400 uppercase"
                        >FSM</span
                    >
                    <div class="flex items-center gap-1">
                        <h3 id="fsm-state" class="text-xs font-bold">
                            Prelaunch
                        </h3>
                    </div>
                </div>
                <div
                    class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-1 flex flex-col items-center"
                >
                    <span class="text-[0.6rem] text-gray-400 uppercase"
                        >GPS</span
                    >
                    <div class="flex items-center gap-1">
                        <span
                            id="fix-status"
                            style="background-color: red"
                            class="w-2 h-2 rounded-xl animate-pulse shadow-xl"
                        ></span>
                        <h3 id="gps-state" class="text-xs font-bold">No Fix</h3>
                    </div>
                </div>
            </div>
        </nav>
        <main id="map-section" class="rounded-xl w-full p-2">
            <div
                style="z-index: 10"
                id="map"
                class="h-[40vh] md:h-[90vh] rounded-xl"
            ></div>
        </main>
        <section id="map-controls" class="flex justify-between px-3">
            <button
                id="follow-me"
                class="bg-gray-700 px-5 py-3 rounded-xl text-white text-md hover:bg-gray-600"
            >
                Go to Me
            </button>
            <button
                id="follow-psat"
                class="bg-gray-700 px-5 py-3 rounded-xl text-white text-md hover:bg-gray-600"
            >
                Follow PSAT
            </button>
            <button
                id="toggle-path"
                class="bg-gray-700 px-5 py-3 rounded-xl text-white text-md hover:bg-gray-600"
            >
                Toggle Path
            </button>
        </section>
        <section id="main-data" class="flex w-full">
            <div
                id="gps-data"
                class="bg-gray-800 border border-gray-700 rounded-lg w-min-"
            >
                <h1>GPS Data</h1>
                <h3>Position: <span id="gps-position"></span></h3>
                <h3>Altitude: <span id="gps-altitude"></span></h3>
                <h3>Speed: <span id="gps-speed"></span></h3>
                <h3>Satelites: <span id="gps-satelites"></span></h3>
            </div>
            <div>
                <div
                    id="fsm-data"
                    class="bg-gray-800 border border-gray-700 rounded-lg w-full"
                >
                    <h1>FSM Data</h1>
                    <h3>Current State: <span id="fsm-current-state"></span></h3>
                    <h3>Previous State: <span id="fsm-prev-state"></span></h3>
                </div>

                <div
                    id="lora-data"
                    class="bg-gray-800 border border-gray-700 rounded-lg"
                >
                    <h1>Lora Data</h1>
                    <h3>Last Packet: <span id="lora-last-packet"></span></h3>
                    <h3>
                        Packets Recieved: <span id="lora-packets-rx"></span>
                    </h3>
                </div>
            </div>
        </section>
        <section id="commands">
            <h1>Buttons</h1>
            <div>
                <button id="state-fast-forward-button">
                    State Fast Forward
                </button>
                <button id="next-state-button">Next State</button>
                <button id="state-override-button">State Override</button>
            </div>
            <div>
                <button
                    id="beep-2500-button"
                    class="bg-gray-700 px-5 py-3 rounded-xl text-white text-md hover:bg-gray-600"
                >
                    Beep 2.5s
                </button>
                <button id="beep-5000-button">Beep 5s</button>
            </div>
        </section>
        <section id="more-data">
            <div id="sensors-data">
                <h1>Sensors Data</h1>
                <h3>Pressure: <span id="sensors-pressure"></span></h3>
                <h3>High G: <span id="sensors-highg"></span></h3>
                <h3>Low G: <span id="sensors-lowg"></span></h3>
            </div>
            <div id="other-data">
                <h1>Other Data</h1>
                <h3>Servo: <span id="other-servo"></span></h3>
                <h3>Camera: <span id="other-camera"></span></h3>
                <h3>Buzzer: <span id="other-buzzer"></span></h3>
            </div>
        </section>
        <section id="log-section">
            <h1>Log:</h1>
            <pre id="log-data"></pre>
        </section>
    </body>
</html>
