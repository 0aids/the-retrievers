<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ground Station</title>

        <link rel="stylesheet" href="/static/css/index.css" />
        <link rel="stylesheet" href="/static/css/leaflet.css" />
        <script type="module" src="/src/main.ts"></script>

        <style>
            body {
                font-family: "Inter", sans-serif;
            }
            .no-scrollbar::-webkit-scrollbar {
                display: none;
            }
            .no-scrollbar {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .gs-btn {
                transition:
                    transform 0.08s ease,
                    background-color 0.12s ease,
                    box-shadow 0.12s ease;
                touch-action: manipulation;
            }

            .gs-btn:active {
                transform: scale(0.96);
                box-shadow: inset 0 0 0 999px rgba(255, 255, 255, 0.06);
            }
        </style>
    </head>

    <body class="bg-[#050809] text-gray-100">
        <nav
            id="topbar"
            class="sticky top-0 z-50 bg-[#050809]/90 backdrop-blur-md border-b border-gray-800 px-4 py-3 flex items-center justify-between"
        >
            <div>
                <h1
                    class="text-[0.6rem] uppercase tracking-widest text-gray-400 font-bold"
                >
                    The Retrievers
                </h1>
                <h2 class="text-lg font-bold">Ground Station</h2>
            </div>

            <div class="flex gap-2">
                <div
                    class="bg-gray-900 border border-gray-800 rounded-lg px-2 py-1 text-center"
                >
                    <p class="text-[0.55rem] uppercase text-gray-400">FSM</p>
                    <p id="fsm-state" class="text-xs font-semibold">
                        Prelaunch
                    </p>
                </div>

                <div
                    class="bg-gray-900 border border-gray-800 rounded-lg px-2 py-1 text-center"
                >
                    <p class="text-[0.55rem] uppercase text-gray-400">GPS</p>
                    <div class="flex items-center gap-1 justify-center">
                        <span
                            id="fix-status"
                            style="background-color: red"
                            class="w-2 h-2 rounded-full animate-pulse"
                        ></span>
                        <p id="gps-state" class="text-xs font-semibold">
                            No Fix
                        </p>
                    </div>
                </div>
            </div>
        </nav>

        <section class="p-2">
            <div
                id="map"
                style="z-index: 10"
                class="h-[45vh] rounded-xl border border-gray-800 shadow-xl overflow-hidden"
            ></div>
        </section>

        <section id="map-controls" class="grid grid-cols-3 gap-2 px-2 pb-2">
            <button
                id="follow-me"
                class="bg-gray-900 gs-btn border border-gray-700 py-3 rounded-xl text-sm font-medium active:bg-gray-700"
            >
                Me
            </button>

            <button
                id="follow-psat"
                class="bg-gray-900 gs-btn border border-gray-700 py-3 rounded-xl text-sm font-medium active:bg-gray-700"
            >
                Follow PSAT
            </button>

            <button
                id="toggle-path"
                class="bg-gray-900 gs-btn border border-gray-700 py-3 rounded-xl text-sm font-medium active:bg-gray-700"
            >
                Path
            </button>
        </section>

        <section class="px-3 space-y-3">
            <div
                id="gps-data"
                class="bg-gray-900 border border-gray-800 rounded-xl p-3"
            >
                <h3 class="text-xs uppercase tracking-wider text-gray-400 mb-2">
                    GPS
                </h3>
                <div class="text-sm space-y-1">
                    <p>Pos: <span id="gps-position"></span></p>
                    <p>Altitude: <span id="gps-altitude"></span></p>
                    <p>Speed: <span id="gps-speed"></span></p>
                    <p>Sats: <span id="gps-satelites"></span></p>
                </div>
            </div>

            <div
                id="fsm-data"
                class="bg-gray-900 border border-gray-800 rounded-xl p-3"
            >
                <h3 class="text-xs uppercase tracking-wider text-gray-400 mb-2">
                    FSM
                </h3>
                <p class="text-sm">
                    Current:
                    <span id="fsm-current-state" class="font-semibold"></span>
                </p>
                <p class="text-xs text-gray-400">
                    Prev: <span id="fsm-prev-state">Not Implmented Yet</span>
                </p>
            </div>

            <div
                id="lora-data"
                class="bg-gray-900 border border-gray-800 rounded-xl p-3"
            >
                <h3 class="text-xs uppercase tracking-wider text-gray-400 mb-2">
                    LoRa
                </h3>
                <p class="text-sm">Last: <span id="lora-last-packet"></span></p>
                <p class="text-sm">RX: <span id="lora-packets-rx"></span></p>
            </div>
        </section>

        <section id="commands" class="px-3 py-3 space-y-2">
            <h3 class="text-xs uppercase tracking-wider text-gray-400">
                Commands
            </h3>

            <div class="grid grid-cols-2 gap-2">
                <button
                    id="state-fast-forward-button"
                    class="bg-gray-800 py-3 rounded-xl text-sm active:bg-gray-600"
                >
                    Fast Fwd
                </button>

                <button
                    id="next-state-button"
                    class="bg-gray-800 py-3 rounded-xl text-sm active:bg-gray-600"
                >
                    Next
                </button>

                <button
                    id="state-override-button"
                    class="bg-gray-800 py-3 rounded-xl text-sm active:bg-gray-600"
                >
                    Override
                </button>

                <button
                    id="beep-2500-button"
                    class="bg-gray-800 py-3 rounded-xl text-sm active:bg-gray-600"
                >
                    Beep 2.5s
                </button>

                <button
                    id="beep-5000-button"
                    class="bg-gray-800 py-3 rounded-xl text-sm active:bg-gray-600"
                >
                    Beep 5s
                </button>
            </div>
        </section>

        <section class="px-3 space-y-3">
            <div
                id="sensors-data"
                class="bg-gray-900 border border-gray-800 rounded-xl p-3"
            >
                <h3 class="text-xs uppercase tracking-wider text-gray-400 mb-2">
                    Sensors
                </h3>
                <p class="text-sm">
                    Pressure:
                    <span id="sensors-pressure">Not Implmented Yet</span>
                </p>
                <p class="text-sm">
                    High G: <span id="sensors-highg">Not Implmented Yet</span>
                </p>
                <p class="text-sm">
                    Low G: <span id="sensors-lowg">Not Implmented Yet</span>
                </p>
            </div>

            <div
                id="other-data"
                class="bg-gray-900 border border-gray-800 rounded-xl p-3"
            >
                <h3 class="text-xs uppercase tracking-wider text-gray-400 mb-2">
                    Other
                </h3>
                <p class="text-sm">
                    Servo: <span id="other-servo">Not Implmented Yet</span>
                </p>
                <p class="text-sm">
                    Camera: <span id="other-camera">Not Implmented Yet</span>
                </p>
                <p class="text-sm">
                    Buzzer: <span id="other-buzzer">Not Implmented Yet</span>
                </p>
            </div>
        </section>

        <section class="px-3 py-4">
            <div
                id="log-section"
                class="bg-black border border-gray-800 rounded-xl p-3"
            >
                <h3 class="text-xs uppercase tracking-wider text-gray-400 mb-2">
                    Log
                </h3>
                <pre
                    id="log-data"
                    class="text-xs text-green-400 max-h-48 overflow-y-auto no-scrollbar"
                >
Not Implmented Yet</pre
                >
            </div>
        </section>
    </body>
</html>
